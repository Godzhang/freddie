<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <style>
      * {
        margin: 0;
        padding: 0;
      }
      html,
      body {
        width: 100%;
        height: 100%;
      }
      html * {
        box-sizing: border-box;
      }
      .iframe-box {
        position: relative;
        width: 100%;
        height: 100%;
      }
      .iframe-item {
        display: none;
        width: 100%;
        height: 100%;
      }
      .button-box {
        position: absolute;
        right: 0;
        top: 200px;
      }
      .control-btn {
        width: 100px;
        height: 50px;
        line-height: 50px;
        margin-bottom: 50px;
        text-align: center;
        border: 2px solid #08c;
        border-radius: 5px;
        cursor: pointer;
      }
      .button-item {
        width: 100px;
        height: 50px;
      }
      .button-item + .button-item {
        margin-top: 20px;
      }
      .btn {
        width: 100%;
        height: 100%;
        outline: none;
        border: none;
        cursor: pointer;
      }
    </style>
    <title>iframe</title>
  </head>
  <body>
    <div class="iframe-box">
      <div class="iframe-item">
        <iframe
          src=""
          frameborder="0"
          marginheight="0"
          marginwidth="0"
          width="100%"
          height="100%"
        ></iframe>
      </div>
      <div class="iframe-item">
        <iframe
          src=""
          frameborder="0"
          marginheight="0"
          marginwidth="0"
          width="100%"
          height="100%"
        ></iframe>
      </div>
      <div class="iframe-item">
        <iframe
          src=""
          frameborder="0"
          marginheight="0"
          marginwidth="0"
          width="100%"
          height="100%"
        ></iframe>
      </div>
      <div class="iframe-item">
        <iframe
          src=""
          frameborder="0"
          marginheight="0"
          marginwidth="0"
          width="100%"
          height="100%"
        ></iframe>
      </div>
    </div>
    <div class="button-box">
      <div class="control-btn">轮换</div>
      <div class="button-item">
        <button class="btn" data-index="0">1</button>
      </div>
      <div class="button-item">
        <button class="btn" data-index="1">2</button>
      </div>
      <div class="button-item">
        <button class="btn" data-index="2">3</button>
      </div>
      <div class="button-item">
        <button class="btn" data-index="3">4</button>
      </div>
    </div>
    <script>
      let urls = ["1.html", "2.html", "3.html", "4.html"];
      let items = document.querySelectorAll(".iframe-item");
      let btnContainer = document.querySelector(".button-box");
      let control = btnContainer.querySelector(".control-btn");
      let btns = btnContainer.querySelectorAll(".btn");
      let selectIndex = 0;
      let isAlternate = true;
      let intervalId = null;
      let intervalTime = 2000;

      function showIframe(index) {
        let cur = items[index];
        let btn = btns[index];
        let iframe = cur.querySelector("iframe");
        let src = iframe.getAttribute("src");
        if (!src) {
          iframe.setAttribute("src", urls[index]);
        }
        items.forEach(item => (item.style.display = "none"));
        cur.style.display = "block";
        btns.forEach(btn => (btn.style.background = "#ddd"));
        btn.style.background = "#f00";
      }

      showIframe(selectIndex);

      btnContainer.addEventListener("click", e => {
        let cur = e.target;
        if (cur.tagName === "BUTTON") {
          let btnIndex = Number(cur.dataset.index);
          showIframe(btnIndex);
          selectIndex = btnIndex;
          if (isAlternate) {
            resetInterval();
          }
        }
      });

      function resetInterval() {
        clearInterval(intervalId);
        startInterval();
      }
      function startInterval() {
        intervalId = setInterval(() => {
          selectIndex = selectIndex === urls.length - 1 ? 0 : selectIndex + 1;
          showIframe(selectIndex);
        }, intervalTime);
      }
      startInterval();

      control.addEventListener("click", () => {
        if (isAlternate) {
          clearInterval(intervalId);
          control.textContent = "暂停";
        } else {
          startInterval();
          control.textContent = "轮换";
        }
        isAlternate = !isAlternate;
      });
    </script>
  </body>
</html>
