<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <script src="./js/public.js"></script>
    <script src="./js/jquery.js"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
      }
    </style>
    <title>zhangqi</title>
  </head>
  <body>
    <div id="container"></div>
    <!-- <p
      style="max-width: 100%; text-align: center; font-size: 12pt; font-family: georgia;"
      class="video"
      data-mce-style="max-width: 100%; text-align: center; font-size: 12pt; font-family: georgia;"
    >
      <video
        controls="controls"
        src="http://svod.cmp.xinhua-news.cn/video2/201909/27/77fdca36dc434bc0abc7040b5ba4de80/8bd5bc6863e6489abbb3716412c32b50_L.mp4"
        poster="/api/v2/reslib/doc/getAttachment?docId=101002019092700001229&libId=3&attachId=102012019092700001598"
      ></video>
    </p>
    <p
      data-mce-style="text-align: left; font-size: 12pt; font-family: georgia;"
      style="text-align: left; font-size: 12pt; font-family: georgia;"
      class=""
    >
      《溏心風暴2019》
    </p> -->

    <script>
      let content = `<p style="max-width: 100%; text-align: center; font-size: 12pt; font-family: georgia;" class="video" data-mce-style="max-width: 100%; text-align: center; font-size: 12pt; font-family: georgia;"><video controls="controls" src="http://svod.cmp.xinhua-news.cn/video2/201909/27/77fdca36dc434bc0abc7040b5ba4de80/8bd5bc6863e6489abbb3716412c32b50_L.mp4"  poster="/api/v2/reslib/doc/getAttachment?docId=101002019092700001229&libId=3&attachId=102012019092700001598"  ></video></p><p data-mce-style="text-align: left; font-size: 12pt; font-family: georgia;" style="text-align: left; font-size: 12pt; font-family: georgia;" class="">《溏心風暴2019》</p>`;
      let result = `溏心|UNK|UNK|UNK kara bran 2019`;

      let newContent = content.replace(/<p[^>]*?>(.*?)<\/p>/g, (...args) => {
        return args[1] + "\n";
      });
      let arr = newContent.split("\n");
      let infos = [];
      let mediaReg = /(<img[^>]*>(?:<\/img>)?)|(<video[^>]*>(?:<\/video>)?)/g;

      arr.forEach((value, index) => {
        let m = value.match(mediaReg);
        if (m) {
          m.forEach(v => {
            infos.push({
              pIndex: index,
              elem: v
            });
          });
        }
      });
      console.log(infos);

      // let resultArr = result.split("↵");
      let resultArr = result.split("\u21B5");
      for (let i = 0, l = infos.length; i < l; i++) {
        let cur = infos[i];
        resultArr.splice(cur.pIndex, 0, cur.elem);
      }
      let lastContent = resultArr.map(v => `<p>${v}</p>`);
      document.getElementById("container").innerHTML = lastContent.join("");

      // let content = `北京，9月25日(新华社)——《海贼王》系列电影的第14部故事片《海贼王》将在中国大陆大银幕上映，该电影的官方微博账号宣布。↵电影的情节围绕着一个名为“海盗博览会”的活动展开，来自世界各地的海盗聚集在这里寻找丢失的宝藏。↵该片将于8月9日在日本上映，目前在中国电影评分网站豆瓣上的评分为8.9分(满分10分)。↵这部电影在大陆的上映日期尚未公布。最终产品`;
      // let container = document.getElementById("container");
      // container.innerHTML = content;
      // console.log(content.split("\n"));
      // let mediaReg = /(<img[^>]*>(?:<\/img>)?)/;
      // console.log(content.match(mediaReg));
    </script>
    <script>
      // function mix(...mixins) {
      //   class Mix {
      //     constructor() {
      //       for (let mixin of mixins) {
      //         copyProperties(this, new mixin()); // 拷贝实例属性
      //       }
      //     }
      //   }

      //   for (let mixin of mixins) {
      //     copyProperties(Mix, mixin);
      //     copyProperties(Mix.prototype, mixin.prototype);
      //   }

      //   return Mix;
      // }

      // function copyProperties(target, source) {
      //   for (let key of Reflect.ownKeys(source)) {
      //     if (!["constructor", "prototype", "name"].includes(key)) {
      //       let desc = Object.getOwnPropertyDescriptor(source, key);
      //       Object.defineProperty(target, key, desc);
      //     }
      //   }
      // }

      // class A {
      //   constructor() {
      //     this.name = "a";
      //   }
      //   methodA() {
      //     console.log("methodA");
      //   }
      // }
      // class B {
      //   constructor() {
      //     this.name = "b";
      //   }
      //   methodB() {
      //     console.log("methodB");
      //   }
      // }
      // class C extends mix(A, B) {
      //   constructor() {
      //     super(...arguments);
      //   }
      // }
      // let c = new C();
      // console.log(c);
      // c.methodA();
    </script>
    <script>
      // class newObj extends Object {
      //   constructor() {
      //     super(...arguments);
      //   }
      // }
      // let o = new newObj({ attr: true });
      // console.log(o);
      // class ExtendableError extends Error {
      //   constructor(message) {
      //     super();
      //     this.message = message;
      //     this.stack = new Error().stack;
      //     this.name = this.constructor.name;
      //   }
      // }
      // class MyError extends ExtendableError {
      //   constructor(m) {
      //     super(m);
      //   }
      // }
      // let myerror = new MyError("ll");
      // console.log(myerror.message);
      // console.log(myerror instanceof Error);
      // console.log(myerror.name);
      // console.log(myerror.stack);
    </script>
    <script>
      // function MyArray() {
      //   Array.apply(this, arguments);
      // }
      // MyArray.prototype = Object.create(Array.prototype, {
      //   constructor: {
      //     value: MyArray,
      //     writable: true,
      //     configurable: true,
      //     enumerable: true
      //   }
      // });
      // class MyArray extends Array {
      //   constructor(...args) {
      //     super(...args);
      //     this.history = [[]];
      //   }
      //   commit() {
      //     this.history.push(this.slice());
      //   }
      //   revert() {
      //     this.splice(0, this.length, ...this.history[this.history.length - 1]);
      //   }
      // }
      // let x = new MyArray();
      // x.push(1);
      // x.push(2);
      // console.log(x);
      // console.log(x.history);

      // x.commit();
      // console.log(x.history);

      // x.push(3);
      // console.log(x);
      // console.log(x.history);

      // x.revert();
      // console.log(x);

      // let colors = new MyArray();
      // colors[0] = "red";
      // console.log(colors.length);

      // colors.length = 0;
      // console.log(colors[0]);

      // let e = {};
      // console.log(Object.getOwnPropertyNames(Error));
      // console.log(Object.getOwnPropertyNames(Error.prototype));
      // console.log(Object.getOwnPropertyNames(Error.call(e)));
      // console.log(Object.getOwnPropertyNames(e));
    </script>
    <script>
      // class Point {
      //   constructor() {
      //     this.x = 1;
      //   }
      //   init() {}
      //   get y() {
      //     return 2;
      //   }
      // }
      // class ColorPoint extends Point {
      //   constructor() {
      //     super();
      //     this.x = 2;
      //   }
      // }
      // let p1 = new Point();
      // let p2 = new ColorPoint();
      // console.log(p2.__proto__.__proto__.y);
      // console.log(p1.__proto__);
      // class A {}
      // console.log(A.__proto__ === Function.prototype);
      // console.log(A.prototype.__proto__ === Object.prototype);

      // class o extends Object {}
      // let obj = new o();
      // console.log(obj);
      // class A {}
      // // class B extends A {}
      // class B {}
      // Object.setPrototypeOf(B, A);
      // Object.setPrototypeOf(B.prototype, A.prototype);
      // console.log(B.__proto__ === A);
      // console.log(B.prototype.__proto__ === A.prototype);
    </script>
    <script>
      // let obj = {
      //   toString() {
      //     return "myObject: " + super.toString();
      //   }
      // };
      // console.log(obj.toString());
      // class Point {
      //   constructor() {
      //     this.x = 1;
      //   }
      //   init() {
      //     // console.log(this.x);
      //   }
      //   static myMethod(msg) {
      //     // console.log("instance", msg);
      //   }
      // }
      // class ColorPoint extends Point {
      //   constructor() {
      //     super();
      //     console.log(super.valueOf());
      //     this.x = 2;
      //     this.init();
      //   }

      //   init() {
      //     console.log(super.valueOf());
      //     super.init();
      //     super.y = 3;
      //     // console.log(super.y);
      //     // console.log(this.y);
      //     // console.log(super);
      //   }

      //   static myMethod(msg) {
      //     // console.log(this);
      //     super.myMethod(msg);
      //   }
      // }
      // Point.myMethod(1);
      // new Point();
      // let cp = new ColorPoint();
      // ColorPoint.myMethod(2);
    </script>
    <script>
      // class Shape {
      //   constructor() {
      //     if (new.target === Shape) {
      //       throw new Error("本类不能实例化");
      //     }
      //   }
      // }
      // let bar = Symbol("bar");
      // class Foo {
      //   _counter = 0;
      //   foo = "bar";
      //   static name = "zhangqi";

      //   constructor() {
      //     console.log(new.target === Foo);
      //   }

      //   foo(baz) {
      //     this[bar](baz);
      //   }
      //   [bar](baz) {
      //     return (this.snaf = baz);
      //   }
      // }
      // let foo = new Foo();
      // class Child extends Foo {
      //   constructor() {
      //     super();
      //     console.log(new.target);
      //   }
      // }
      // new Child();
      // console.log(Object.keys(Foo.prototype));
      // console.log(Reflect.ownKeys(Foo.prototype));
      // class Foo {
      //   static classMethod() {
      //     return "hello";
      //   }
      //   classMethod() {
      //     console.log("shili");
      //   }
      // }
      // Foo.classMethod();
      // let foo = new Foo();
      // foo.classMethod();

      // class Bar extends Foo {
      //   static classMethod() {
      //     return super.classMethod() + ", bar";
      //   }
      // }
      // console.log(Bar.classMethod());
    </script>
    <script>
      // function selfish(target) {
      //   const cache = new WeakMap();
      //   const handler = {
      //     get(target, key) {
      //       const value = Reflect.get(target, key);
      //       if (typeof value !== "function") {
      //         return value;
      //       }
      //       if (!cache.has(value)) {
      //         cache.set(value, value.bind(target));
      //       }
      //       return cache.get(value);
      //     }
      //   };
      //   const proxy = new Proxy(target, handler);
      //   return proxy;
      // }

      // class Logger {
      //   constructor() {}
      //   printName(name = "there") {
      //     this.print(`Hello ${name}`);
      //   }
      //   print(text) {
      //     console.log(text);
      //   }
      // }
      // let logger = selfish(new Logger());
      // const { printName } = logger;
      // printName();

      // const init = new (class Me {
      //   constructor(...args) {
      //     this.args = args;
      //   }
      //   *[Symbol.iterator]() {
      //     for (let arg of this.args) {
      //       yield arg;
      //     }
      //   }
      // })("hello", "world");
      // for (let x of init) {
      //   console.log(x);
      // }
      // let methodName = "getArea";
      // class Parent {
      //   constructor(x, y) {
      //     this.x = x;
      //     this.y = y;
      //   }

      //   say() {
      //     console.log(this.x, this.y);
      //   }

      //   get prop() {
      //     return "prop getter";
      //   }

      //   set prop(value) {
      //     console.log("prop setter: " + value);
      //   }

      //   [methodName]() {
      //     console.log("methodname getArea");
      //   }
      // }

      // let p = new Parent(1, 2);
      // console.log(p);

      // class Child extends Parent {
      //   constructor(x, y, z) {
      //     super(x, y);
      //     this.z = z;
      //   }
      // }

      // let c = new Child(1, 2, 3);
      // console.log(c);
    </script>
    <script>
      // let Chinese = { nation: "中国" };
      // // let Doctor = { career: "医生" };

      // function object(o) {
      //   function F() {}
      //   F.prototype = o;
      //   return new F();
      // }
      // // let Doctor = object(Chinese);
      // let Doctor = Object.create(Chinese, {
      //   color: {
      //     writable: true,
      //     configurable: true,
      //     value: "yellow"
      //   },
      //   type: {
      //     get() {
      //       return "convertibal";
      //     },
      //     set(value) {
      //       console.log("changed: " + "value");
      //     }
      //   }
      // });
      // Doctor.career = "医生";

      // console.log(Doctor);
      // console.log(Doctor.nation);
      // Doctor.type = "zhangqi";

      // function Animal() {}
      // Animal.prototype.species = "动物";

      // function Cat(name, color) {
      //   Animal.apply(this, arguments);
      //   this.name = name;
      //   this.color = color;
      // }

      // function extend(child, parent) {
      //   let F = function() {};
      //   F.prototype = parent.prototype;
      //   child.prototype = new F();
      //   child.prototype.constructor = child;
      // }

      // function extend2(child, parent) {
      //   let p = parent.prototype;
      //   let c = child.prototype;

      //   for (let i in p) {
      //     c[i] = p[i];
      //   }
      // }

      // extend2(Cat, Animal);

      // let animail = new Animal();
      // let cat = new Cat("huniu", "heibai");

      // console.log(animail);
      // console.log(cat);
    </script>
  </body>
</html>
