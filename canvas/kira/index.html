<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <style>
    html, body { width: 100%; height: 100%; }
    body { background-color: #000; }
  </style>
  <title>kira</title>
</head>
<body>

<canvas id="canvas"></canvas>

<script>
let canvas = document.getElementById('canvas')
let context = canvas.getContext('2d')
let cw = canvas.width = window.innerWidth
let ch = canvas.height = window.innerHeight

// 创建一个闪烁圆的类
class Kirakira {
  constructor () {
    this.targetLocation = { x: cw / 2, y: ch / 2 }
    this.radius = 1
  }

  draw () {
    let { x, y } = this.targetLocation
    context.beginPath()
    context.arc(x, y, 5, 0, Math.PI * 2)
    context.lineWidth = 2
    context.strokeStyle = '#fff'
    context.stroke()
  }

  update () {
    if (this.radius < 5) {
      this.radius += 0.3
    } else {
      this.radius = 1
    }
  }

  init () {
    this.draw()
  }
}

class Biubiubiu {
  constructor (startX, startY, targetX, targetY) {
    this.startLocation = { x: startX, y: startY }
    this.nowLocation = { x: startX, y: startY }
    this.targetLocation = { x: targetX, y: targetY }
    this.targetDistance = this.getDistance(this.startLocation.x, this.startLocation.y, this.targetLocation.x, this.targetLocation.y)
    this.speed = 2
    this.angle = Math.atan2(this.targetLocation.y - this.startLocation.y, this.targetLocation.x - this.startLocation.x)
    this.arrived = false
  }
  draw () {
    context.beginPath()
    context.moveTo(this.startLocation.x, this.startLocation.y)
    context.lineWidth = 3
    context.lineCap = 'round'
    context.lineTo(this.nowLocation.x, this.nowLocation.y)
    context.strokeStyle = '#fff'
    context.stroke()
  }

  update () {
    // 计算当前帧的路程
  }

  getDistance (x0, y0, x1, y1) {
    let locX = x1 - x0
    let locY = y1 - y0
    return Math.sqrt(Math.pow(locX, 2) + Math.pow(locY, 2))
  }

  init () {
    this.draw()
    this.update()
  }
}

class Animate {
  run () {
    window.requestAnimationFrame(this.run.bind(this))
    context.clearRect(0, 0, cw, ch)
    if (o) {
      o.init()
    }
  }
}

let o = new Kirakira()
let b = new Biubiubiu(Math.random() * (cw / 2), ch, cw / 2, ch / 2)
let a = new Animate()
a.run()








</script>
</body>
</html>